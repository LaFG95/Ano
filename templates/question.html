<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Comments</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif;margin:0;padding:0;background:#121212;color:#e0e0e0;text-align:center;}
main{padding:20px;max-width:800px;margin:auto;}
.question,.comment{padding:15px;margin-bottom:15px;border-radius:10px;box-shadow:0 2px 10px rgba(0,0,0,0.5);}
.question span,.comment span{color:#9e9e9e;font-size:0.75em;display:block;margin-bottom:5px;}
.question p,.comment p{color:#ffffff;margin:0;}
textarea{width:100%;padding:10px;border-radius:8px;border:none;margin-bottom:10px;background:#1f1f1f;color:#e0e0e0;}
input[type="submit"]{padding:10px 20px;background:#76c7c0;color:#121212;border:none;border-radius:8px;cursor:pointer;}
input[type="submit"]:hover{background:#4fa09a;}
a.button{display:inline-block;padding:10px 20px;background:#76c7c0;color:#121212;text-decoration:none;border-radius:8px;margin-top:10px;}
a.button:hover{background:#4fa09a;}
.fade-out{opacity:0;transform:translateY(-20px);}
@media(max-width:600px){main{padding:10px;}.question,.comment{padding:10px;}a.button,input[type="submit"]{width:100%;box-sizing:border-box;text-align:center;}}
</style>
</head>
<body>
<header>
<h1>Comments</h1>
<a class="button" href="/">Back to Home</a>
</header>
<main>
<div class="question">
    <span>#{{ question[0] }} | From: {{ question[2] }}</span>
    <p>{{ question[1] }}</p>
    {% if request.args.get("admin")=="supersecret" %}
    <a href="javascript:void(0);" onclick="confirmDelete('/delete/{{ question[0] }}?admin=supersecret','q{{ question[0] }}')" class="button">Delete question and all comments</a>
    {% endif %}
</div>
<h2>Comments</h2>
{% for c in comments %}
<div class="comment" id="c{{ c[0] }}">
    <span>{{ c[2] }}</span>
    <p>{{ c[1] }}</p>
    {% if request.args.get("admin")=="supersecret" %}
    <a href="javascript:void(0);" onclick="confirmDelete('/delete_comment/{{ c[0] }}?admin=supersecret','c{{ c[0] }}')" class="button">Delete</a>
    {% endif %}
</div>
{% else %}
<p>No comments yet.</p>
{% endfor %}
<h3>Add a Comment</h3>
<form action="/comment/{{ question[0] }}" method="post">
<textarea name="comment" rows="3" placeholder="Write your comment..."></textarea><br>
<input type="submit" value="Submit">
</form>
<script>
function confirmDelete(url,elId){if(confirm("Вы уверены, что хотите удалить?")){const el=document.getElementById(elId);el.classList.add("fade-out");setTimeout(()=>{window.location.href=url;},300);}}
</script>
</main>
</body>
</html>
