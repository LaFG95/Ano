<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Anonymous Advice</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style>
:root {
    --bg-color: #121212;
    --text-color: #e0e0e0;
    --header-bg: #1f1f1f;
    --primary: #76c7c0;
    --primary-hover: #4fa09a;
}

body.light {
    --bg-color: #f0f0f0;
    --text-color: #121212;
    --header-bg: #fff;
    --primary: #76c7c0;
    --primary-hover: #4fa09a;
}

body { 
    font-family:'Roboto',sans-serif; 
    background: var(--bg-color); 
    color: var(--text-color); 
    margin:0; 
    padding:0; 
    transition: background 0.3s, color 0.3s;
}
header { 
    background: var(--header-bg); 
    padding:20px; 
    text-align:center; 
    transition: background 0.3s;
}
header h1 { margin:0; color:var(--primary); font-size:2rem; }
main { padding:20px; max-width:800px; margin:auto; }
.question { 
    background: var(--header-bg); 
    padding:15px; 
    margin-bottom:15px; 
    border-radius:10px; 
    box-shadow:0 2px 10px rgba(0,0,0,0.5); 
    opacity:0; transform: translateY(20px); 
    transition: all 0.5s ease;
}
.question.show { opacity:1; transform: translateY(0); }

.question span { color:#9e9e9e; font-size:0.9em; }
a.button { 
    display:inline-block; 
    padding:10px 20px; 
    background:var(--primary); 
    color: var(--bg-color); 
    text-decoration:none; 
    border-radius:8px; 
    margin-top:10px; 
    transition: background 0.2s, transform 0.2s; 
}
a.button:hover { background: var(--primary-hover); transform: scale(1.05); }

/* Адаптивность */
@media (max-width: 600px) {
    header h1 { font-size:1.5rem; }
    main { padding:10px; }
    .question { padding:10px; }
    a.button { display:block; width:100%; text-align:center; margin-top:10px; padding:12px 0; }
}

/* Toast */
#toast { visibility:hidden; min-width:200px; background:var(--primary); color:var(--bg-color); text-align:center; border-radius:8px; padding:10px; position:fixed; z-index:1000; left:50%; bottom:30px; transform:translateX(-50%); }
#toast.show { visibility:visible; animation:fadein 0.5s, fadeout 0.5s 2.5s; }
@keyframes fadein { from {bottom:0; opacity:0;} to {bottom:30px; opacity:1;} }
@keyframes fadeout { from {bottom:30px; opacity:1;} to {bottom:0; opacity:0;} }

#themeToggle { cursor:pointer; padding:5px 10px; background:var(--primary); color:var(--bg-color); border:none; border-radius:5px; margin-left:10px; }
</style>
</head>
<body>
<header>
<h1>Anonymous Advice</h1>
<a class="button" href="/ask">Ask a Question</a>
<button id="themeToggle">Switch Theme</button>
</header>
<main id="questionsContainer">
{% for q in questions %}
<div class="question">
    <span>#{{ q[0] }} | {{ q[2] }}</span>
    <p>{{ q[1] }}</p>
    {% if is_admin %}
    <a href="/delete/{{ q[0] }}?admin=supersecret" class="button" onclick="return confirm('Are you sure you want to delete this question?');">Delete</a>
    {% endif %}
    <a class="button" href="/question/{{ q[0] }}">Comments</a>
</div>
{% else %}
<p>No questions yet.</p>
{% endfor %}
</main>
<div id="toast"></div>

<script>
// --------- Toast ----------
function showToast(msg){
    const x = document.getElementById("toast");
    x.innerText = msg;
    x.className = "show";
    setTimeout(()=>{ x.className = x.className.replace("show",""); }, 3000);
}

// --------- Theme toggle ----------
const btn = document.getElementById("themeToggle");
btn.addEventListener("click",()=>{
    document.body.classList.toggle("light");
    localStorage.setItem("theme", document.body.classList.contains("light") ? "light" : "dark");
});
window.addEventListener("load", ()=>{
    if(localStorage.getItem("theme")==="light") document.body.classList.add("light");
});

// --------- Animate questions ----------
const questions = document.querySelectorAll(".question");
questions.forEach((q,i)=> setTimeout(()=>{ q.classList.add("show"); }, i*100));
</script>
</body>
</html>
