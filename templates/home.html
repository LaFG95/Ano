<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Anonymous Advice</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto&display=swap" rel="stylesheet">
<style>
body {
    font-family: 'Roboto', sans-serif;
    margin: 0;
    padding: 0;
    transition: background 0.3s, color 0.3s;
}
body[data-theme="dark"] { background:#121212; color:#e0e0e0; }
body[data-theme="light"] { background:#f0f0f0; color:#121212; }

header {
    padding: 20px;
    text-align: center;
    transition: background 0.3s;
}
body[data-theme="dark"] header { background:#1f1f1f; }
body[data-theme="light"] header { background:#ffffff; }
header h1 { margin:0; color:#76c7c0; font-size:2rem; }

main { padding: 20px; max-width: 800px; margin:auto; }

.question {
    padding:15px;
    margin-bottom:15px;
    border-radius:10px;
    box-shadow:0 2px 10px rgba(0,0,0,0.5);
    transition: all 0.3s ease;
}
body[data-theme="dark"] .question { background:#1f1f1f; color:#ffffff; }
body[data-theme="light"] .question { background:#ffffff; color:#121212; }

span { color: #9e9e9e; font-size:0.9em; display:block; margin-bottom:5px; }

a.button {
    display:inline-block;
    padding:10px 20px;
    background:#76c7c0;
    color:#121212;
    text-decoration:none;
    border-radius:8px;
    margin-top:10px;
    transition: background 0.2s, transform 0.2s;
}
a.button:hover { background:#4fa09a; transform:scale(1.05); }

/* –ê–Ω–∏–º–∞—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è */
.fade-out { opacity:0; transform:translateY(-20px); }

@media (max-width:600px) {
    header h1 { font-size:1.5rem; }
    main { padding:10px; }
    .question { padding:10px; }
    a.button { display:block; width:100%; text-align:center; margin-top:10px; padding:12px 0; }
}
</style>
</head>
<body data-theme="dark">
<header>
<h1>Anonymous Advice</h1>
<button id="theme-toggle" class="button">üåô / ‚òÄÔ∏è</button>
<a class="button" href="/ask">Ask a Question</a>
</header>
<main>
{% for q in questions %}
<div class="question" id="q{{ q[0] }}">
    <span>#{{ q[0] }} | {{ q[2] }}</span>
    <p>{{ q[1] }}</p>
    {% if is_admin %}
    <a href="javascript:void(0);" onclick="confirmDelete('/delete/{{ q[0] }}?admin=supersecret', 'q{{ q[0] }}')" class="button">Delete</a>
    {% endif %}
    <a class="button" href="/question/{{ q[0] }}">Comments</a>
</div>
{% else %}
<p>No questions yet.</p>
{% endfor %}
</main>

<script>
// –¢–µ–º–∞
const toggle = document.getElementById("theme-toggle");
const savedTheme = localStorage.getItem("theme") || "dark";
document.body.dataset.theme = savedTheme;

toggle.addEventListener("click", ()=>{
    const newTheme = document.body.dataset.theme === "dark" ? "light" : "dark";
    document.body.dataset.theme = newTheme;
    localStorage.setItem("theme", newTheme);
});

// –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
function confirmDelete(url, elementId){
    if(confirm("–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å?")){
        const el = document.getElementById(elementId);
        el.classList.add("fade-out");
        setTimeout(()=>{ window.location.href=url; }, 300);
    }
}
</script>
</body>
</html>
